<html>
    <head>
        <title>ThaanAquatics | <%= currentCategory %></title>
        <link rel="stylesheet" type="text/css" href="/assets/css/style.css">
        <link href="https://fonts.googleapis.com/css?family=Patrick Hand" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
        <link rel="icon" href="assets/img/favicon/favicon.ico" type="image/x-icon">
        <script src="/assets/js/script.js" defer></script>
        <meta charset="utf-8">
    </head>
    <body>
        <div class="nav">
            <div id="left">
                <div class="search-container">
                    <form action="/search" method="get">
                      <input class="search" id="searchleft" type="search" name="q" placeholder="Search">
                      <label class="button searchbutton" for="searchleft"><span class="mglass">&#9906;</span></label>
                    </form>
                  </div>
            </div>
            <div id="center">
                <a href="/">
                    <img src="/assets/img/logo.png" alt="TA" id="logo">
                </a>
            </div>
            <div id="right">
                <a href="">
                    <img src="/assets/img/account-img.png" alt="Account">
                </a>
                <a href="javascript:void(0);" class="cart-container" id="cart">
                    <img src="/assets/img/cart-img.png" alt="Cart" id="cart-icon">
                    <!-- Dropdown container for cart items -->
                    <div class="cart-dropdown" style="display: none;">
                        <ul class="cart-items">
                            <!-- Cart items will be dynamically inserted here -->
                        </ul>
                    </div>
                </a>
            </div>
        </div>

        <div class="container">
            <div class="topbar">
                    <div class="topbar-dropdown">
                        <a>Catfish</a>
                        <div class="topbar-dropdown-content">
                            <a href="/products/Corydoras">Corydoras</a>
                            <a href="/products/Plecostomus">Plecostomus</a>
                        </div>
                    </div>
                    <a href="/products/Guppies">Guppies</a>
                    <a href="/products/Mollies">Mollies</a>
                    <a href="/products/Bettas">Bettas</a>
                    <a href="/products/Feeders and Inverts">Feeders</a>
                    <a href="/products/Plants">Plants</a>
            </div>
            
            <div class="gallery">
                <div class="breadcrumbs">
                    <a href="/">Home</a> > <a id="no-underline"><%= currentCategory %></a>
                    <p><%= currentCategory %></p>
                </div>
                <div class="items-grid">
                    <% items.sort((a, b) => (b.Quantity > 0) - (a.Quantity > 0) || a.Name.localeCompare(b.Name)).forEach(item => { %>
                        <a href="/products/<%= currentCategory %>/<%= item.Name %>" class="<%= item.Quantity === 0 ? 'sold-out' : '' %>">
                            <div class="item-card">
                                <img src="<%= item.photoPath %>" alt="<%= item.Name %>" class="item-image">
                                <h3><%= item.Name %></h3>
                                <p><strong>Category:</strong> <%= item.Category %></p>
                                <p><strong>Price:</strong> 
                                    <% if (item.Quantity && item.Quantity > 0) { %>
                                        <%= item.Price %>
                                    <% } else { %>
                                        Sold Out
                                    <% } %>
                                </p>
                            </div>
                        </a>
                    <% }); %>
                </div>
                
            </div>
        </div>
    </body>
</html>